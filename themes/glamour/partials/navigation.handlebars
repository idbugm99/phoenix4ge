<!-- Glamour Navigation - Elegant and Sophisticated -->
<nav class="glamour-nav fixed w-full top-0 z-50" role="navigation" aria-label="Primary Navigation">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-16">
            
            <!-- Brand/Logo -->
            <div class="flex items-center">
                <a href="/{{modelSlug}}{{previewParam}}" 
                   class="font-bold text-2xl transition-all duration-300 hover:scale-105"
                   style="font-family: var(--font-display); color: var(--theme-primary);">
                    <i class="fas fa-gem mr-2" style="color: var(--theme-accent);"></i>
                    {{siteName}}
                </a>
            </div>
            
            <!-- Desktop Navigation -->
            <div class="hidden md:block">
                <div class="ml-10 flex items-baseline space-x-8" role="menubar">
                    {{#each navigation}}
                    <a href="{{this.url}}" 
                       class="nav-link px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 hover:scale-105 {{#if this.active}}glamour-nav-active{{/if}}"
                       style="color: var(--theme-text); font-family: var(--font-body);"
                       role="menuitem" 
                       aria-current="{{#if this.active}}page{{/if}}">
                        {{this.name}}
                    </a>
                    {{/each}}
                </div>
            </div>
            
            <!-- CTA Button -->
            <div class="hidden md:block">
                <a href="/{{modelSlug}}/calendar{{previewParam}}" 
                   class="glamour-btn">
                    <i class="fas fa-calendar-alt"></i>
                    Book Now
                </a>
            </div>
            
            <!-- Mobile menu button -->
            <div class="md:hidden">
                <button type="button" 
                        class="inline-flex items-center justify-center p-2 rounded-lg transition-colors duration-300"
                        style="color: var(--theme-text); border: 1px solid var(--theme-border);"
                        aria-controls="mobile-menu" 
                        aria-expanded="false"
                        onclick="toggleMobileMenu()">
                    <span class="sr-only">Open main menu</span>
                    <i class="fas fa-bars text-xl" id="mobile-menu-icon"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="md:hidden hidden">
        <div class="px-4 pt-4 pb-6 space-y-3 border-t"
             style="background: var(--theme-surface); border-color: var(--theme-border);">
            {{#each navigation}}
            <a href="{{this.url}}"
               class="block px-4 py-3 rounded-lg text-base font-medium transition-colors duration-300 {{#if this.active}}mobile-nav-active{{/if}}"
               style="color: var(--theme-text);"
               role="menuitem">
                {{this.name}}
            </a>
            {{/each}}
        </div>
    </div>
</nav>

<style>
/* Navigation-specific styles */
.nav-link:hover {
    background: var(--theme-overlay);
    color: var(--theme-primary) !important;
    transform: translateY(-1px);
}

.glamour-nav-active {
    background: var(--theme-overlay);
    color: var(--theme-primary) !important;
    font-weight: 600;
}

.mobile-nav-active {
    background: var(--theme-overlay);
    color: var(--theme-primary) !important;
    font-weight: 600;
}

/* Mobile menu animations */
#mobile-menu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

#mobile-menu.show {
    max-height: 500px;
}

/* CRITICAL: Mobile Navigation Responsive Rules */
@media (max-width: 767px) {
    /* Force hide desktop navigation on mobile */
    .glamour-nav div[class*="md:block"] {
        display: none !important;
    }

    /* Force show mobile menu button */
    .glamour-nav div[class*="md:hidden"] {
        display: block !important;
    }

    /* Show mobile menu when toggled with "show" class */
    #mobile-menu.show {
        display: block !important;
        max-height: 500px !important;
    }
}

@media (min-width: 768px) {
    /* Force show desktop navigation on desktop */
    .glamour-nav div[class*="md:block"] {
        display: block !important;
    }

    /* Force hide mobile menu button */
    .glamour-nav div[class*="md:hidden"] {
        display: none !important;
    }

    /* Force hide mobile menu itself on desktop */
    #mobile-menu {
        display: none !important;
    }
}
</style>

<script>
function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    const icon = document.getElementById('mobile-menu-icon');
    
    if (menu.classList.contains('show')) {
        menu.classList.remove('show');
        menu.classList.add('hidden');
        icon.className = 'fas fa-bars text-xl';
    } else {
        menu.classList.remove('hidden');
        menu.classList.add('show');
        icon.className = 'fas fa-times text-xl';
    }
}

// Close mobile menu when clicking outside
document.addEventListener('click', function(event) {
    const menu = document.getElementById('mobile-menu');
    const button = event.target.closest('[aria-controls="mobile-menu"]');
    
    if (!button && !menu.contains(event.target) && menu.classList.contains('show')) {
        toggleMobileMenu();
    }
});

// Close mobile menu on window resize to desktop
window.addEventListener('resize', function() {
    if (window.innerWidth >= 768) {
        const menu = document.getElementById('mobile-menu');
        const icon = document.getElementById('mobile-menu-icon');
        
        if (menu.classList.contains('show')) {
            menu.classList.remove('show');
            menu.classList.add('hidden');
            icon.className = 'fas fa-bars text-xl';
        }
    }
});
</script>